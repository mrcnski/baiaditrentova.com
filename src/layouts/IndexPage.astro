---
import yaml from 'js-yaml';
import fs from 'fs';

interface IndexPage {
    images: {
        image: string;
        heading?: string;
    }[];
}

let indexPage: IndexPage | undefined = undefined;
try {
    indexPage = yaml.load(fs.readFileSync('oreste/index.yaml', 'utf8')) as IndexPage;
} catch (e) {
    console.log(e);
}

import Layout from "@layouts/Layout.astro";

import ParallaxImage from "@components/ParallaxImage.astro";

import { getLangFromUrl, useTranslations, useDataTranslations } from '@i18n/utils';
const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const { d } = useDataTranslations(lang);
---

<Layout title={t("index.title")} description={t("index.description")}>
    {(indexPage?.images || []).map((image) => (
        <ParallaxImage relativeSrc={image.image} heading={d(image.heading)!} />
    ))}
</Layout>

<style lang="less">
</style>
